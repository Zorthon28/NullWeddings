(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{7204:function(e,t,s){Promise.resolve().then(s.bind(s,310))},310:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var a=s(7437),r=s(2265),l=s(2381),n=s(279),i=s(5060),d=s(721),o=s(3448);let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(d.fC,{className:(0,o.cn)("peer inline-flex h-[20px] w-[36px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,a.jsx)(d.bU,{className:(0,o.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});c.displayName=d.fC.displayName;var h=s(9820),m=s(7561),x=s(3145);let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",s),...r})})});u.displayName="Table";let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",s),...r})});g.displayName="TableHeader";let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",s),...r})});j.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,o.cn)("bg-primary font-medium text-primary-foreground",s),...r})}).displayName="TableFooter";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});f.displayName="TableRow";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,o.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...r})});p.displayName="TableHead";let y=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,o.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...r})});y.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption";var b=s(4098),w=s(653);let v=b.fC;b.xz;let N=e=>{let{...t}=e;return(0,a.jsx)(b.h_,{...t})};N.displayName=b.h_.displayName;let k=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(b.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});k.displayName=b.aV.displayName;let C=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(N,{children:[(0,a.jsx)(k,{}),(0,a.jsxs)(b.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",s),...l,children:[r,(0,a.jsxs)(b.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(w.Pxu,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});C.displayName=b.VY.displayName;let _=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};_.displayName="DialogHeader";let S=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(b.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});S.displayName=b.Dx.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(b.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...r})}).displayName=b.dk.displayName;var R=s(277);let P=R.fC;R.xz;let z=e=>{let{...t}=e;return(0,a.jsx)(R.h_,{...t})};z.displayName=R.h_.displayName;let D=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(R.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});D.displayName=R.aV.displayName;let F=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(z,{children:[(0,a.jsx)(D,{}),(0,a.jsx)(R.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",s),...r})]})});F.displayName=R.VY.displayName;let L=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};L.displayName="AlertDialogHeader";let I=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};I.displayName="AlertDialogFooter";let B=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(R.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold",s),...r})});B.displayName=R.Dx.displayName;let V=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(R.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...r})});V.displayName=R.dk.displayName;let A=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(R.aU,{ref:t,className:(0,o.cn)((0,l.d)(),s),...r})});A.displayName=R.aU.displayName;let E=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(R.$j,{ref:t,className:(0,o.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});E.displayName=R.$j.displayName;var G=s(5291),T=s(3675),O=s(8752),U=s(5526);function Y(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),[m,x]=(0,r.useState)(null),[b,w]=(0,r.useState)(""),[N,k]=(0,r.useState)(null),[R,z]=(0,r.useState)(!1),[D,Y]=(0,r.useState)(!1),[M,Z]=(0,r.useState)(null),{toast:H}=(0,O.pm)();(0,r.useEffect)(()=>{W()},[]),(0,r.useEffect)(()=>{d(e.filter(e=>e.name.toLowerCase().includes(b.toLowerCase())||e.email.toLowerCase().includes(b.toLowerCase())||e.attendance_status.toLowerCase().includes(b.toLowerCase())||e.dietary_restrictions&&e.dietary_restrictions.toLowerCase().includes(b.toLowerCase())))},[e,b]);let W=async()=>{try{c(!0),x(null);let{data:e,error:s}=await U.O.from("rsvp_responses").select("*").order("created_at",{ascending:!1});if(s)throw s;t(e||[])}catch(e){console.error("Error fetching RSVP responses:",e),x("Failed to load RSVP responses. Please try again.")}finally{c(!1)}},q=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Q=e=>{k({...e}),z(!0)},$=async()=>{if(!N)return;let s=[...e];try{let s=e.map(e=>e.id===N.id?N:e);t(s);let{error:a}=await U.O.from("rsvp_responses").update({name:N.name,email:N.email,attendance_status:N.attendance_status,party_size:N.party_size,dietary_restrictions:N.dietary_restrictions}).eq("id",N.id);if(a)throw a;H({title:"Success",description:"RSVP response updated successfully."}),z(!1),k(null)}catch(e){console.error("Error updating RSVP response:",e),t(s),H({title:"Error",description:"Failed to update RSVP response. Please try again.",variant:"destructive"})}},J=e=>{Z(e),Y(!0)},K=async()=>{if(!M)return;let s=[...e];try{let s=e.filter(e=>e.id!==M);t(s);let{error:a}=await U.O.from("rsvp_responses").delete().eq("id",M);if(a)throw a;H({title:"Success",description:"RSVP response deleted successfully."}),Y(!1),Z(null)}catch(e){console.error("Error deleting RSVP response:",e),t(s),H({title:"Error",description:"Failed to delete RSVP response. Please try again.",variant:"destructive"})}};return o?(0,a.jsx)(h.Zb,{children:(0,a.jsx)(h.aY,{className:"flex items-center justify-center py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-gold border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading RSVP responses..."})]})})}):m?(0,a.jsx)(h.Zb,{children:(0,a.jsx)(h.aY,{className:"py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:m}),(0,a.jsx)(l.z,{onClick:W,variant:"outline",children:"Try Again"})]})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(h.Zb,{children:[(0,a.jsxs)(h.Ol,{children:[(0,a.jsx)(h.ll,{children:"Guest Management Dashboard"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,a.jsx)("div",{className:"flex-1 max-w-sm",children:(0,a.jsx)(n.I,{placeholder:"Search responses...",value:b,onChange:e=>w(e.target.value),className:"w-full"})}),(0,a.jsx)(l.z,{onClick:()=>{let e=new Blob([["Name,Email,Attendance Status,Party Size,Dietary Restrictions,Created At",...s.map(e=>['"'.concat(e.name,'"'),'"'.concat(e.email,'"'),'"'.concat(e.attendance_status,'"'),e.party_size,'"'.concat(e.dietary_restrictions||"",'"'),'"'.concat(new Date(e.created_at).toLocaleDateString(),'"')].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),a=URL.createObjectURL(e);t.setAttribute("href",a),t.setAttribute("download","rsvp_responses.csv"),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"bg-gold hover:bg-gold/80 text-black",children:"Export to CSV"})]})]}),(0,a.jsxs)(h.aY,{children:[(0,a.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",s.length," of ",e.length," responses"]}),(0,a.jsxs)(u,{children:[(0,a.jsx)(g,{children:(0,a.jsxs)(f,{children:[(0,a.jsx)(p,{children:"Name"}),(0,a.jsx)(p,{children:"Email"}),(0,a.jsx)(p,{children:"Attendance Status"}),(0,a.jsx)(p,{children:"Party Size"}),(0,a.jsx)(p,{children:"Dietary Restrictions"}),(0,a.jsx)(p,{children:"Created At"}),(0,a.jsx)(p,{children:"Actions"})]})}),(0,a.jsx)(j,{children:0===s.length?(0,a.jsx)(f,{children:(0,a.jsx)(y,{colSpan:7,className:"text-center py-8 text-gray-500",children:b?"No responses match your search.":"No RSVP responses found."})}):s.map(e=>(0,a.jsxs)(f,{children:[(0,a.jsx)(y,{className:"font-medium",children:e.name}),(0,a.jsx)(y,{children:e.email}),(0,a.jsx)(y,{children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("attending"===e.attendance_status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.attendance_status})}),(0,a.jsx)(y,{children:e.party_size}),(0,a.jsx)(y,{children:e.dietary_restrictions||"-"}),(0,a.jsx)(y,{children:q(e.created_at)}),(0,a.jsx)(y,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>Q(e),children:"Edit"}),(0,a.jsx)(l.z,{variant:"destructive",size:"sm",onClick:()=>J(e.id),children:"Delete"})]})})]},e.id))})]})]})]}),(0,a.jsx)(v,{open:R,onOpenChange:z,children:(0,a.jsxs)(C,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(_,{children:(0,a.jsx)(S,{children:"Edit RSVP Response"})}),N&&(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(i._,{htmlFor:"name",className:"text-right",children:"Name"}),(0,a.jsx)(n.I,{id:"name",value:N.name,onChange:e=>k({...N,name:e.target.value}),className:"col-span-3"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(i._,{htmlFor:"email",className:"text-right",children:"Email"}),(0,a.jsx)(n.I,{id:"email",type:"email",value:N.email,onChange:e=>k({...N,email:e.target.value}),className:"col-span-3"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(i._,{htmlFor:"status",className:"text-right",children:"Status"}),(0,a.jsxs)(G.Ph,{value:N.attendance_status,onValueChange:e=>k({...N,attendance_status:e}),children:[(0,a.jsx)(G.i4,{className:"col-span-3",children:(0,a.jsx)(G.ki,{})}),(0,a.jsxs)(G.Bw,{children:[(0,a.jsx)(G.Ql,{value:"attending",children:"Attending"}),(0,a.jsx)(G.Ql,{value:"not attending",children:"Not Attending"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(i._,{htmlFor:"party_size",className:"text-right",children:"Party Size"}),(0,a.jsx)(n.I,{id:"party_size",type:"number",min:"1",value:N.party_size,onChange:e=>k({...N,party_size:parseInt(e.target.value)||1}),className:"col-span-3"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(i._,{htmlFor:"dietary",className:"text-right",children:"Dietary"}),(0,a.jsx)(T.g,{id:"dietary",value:N.dietary_restrictions||"",onChange:e=>k({...N,dietary_restrictions:e.target.value}),className:"col-span-3",placeholder:"Enter dietary restrictions..."})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(l.z,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),(0,a.jsx)(l.z,{onClick:$,children:"Save Changes"})]})]})}),(0,a.jsx)(P,{open:D,onOpenChange:Y,children:(0,a.jsxs)(F,{children:[(0,a.jsxs)(L,{children:[(0,a.jsx)(B,{children:"Are you sure?"}),(0,a.jsx)(V,{children:"This action cannot be undone. This will permanently delete the RSVP response."})]}),(0,a.jsxs)(I,{children:[(0,a.jsx)(E,{children:"Cancel"}),(0,a.jsx)(A,{onClick:K,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}function M(){let{settings:e,updateSetting:t,isLoading:s,user:d,signIn:o,signOut:x}=(0,m.A)(),[u,g]=(0,r.useState)(""),[j,f]=(0,r.useState)(""),[p,y]=(0,r.useState)(""),b=async e=>{e.preventDefault();try{await o(u,j),y("")}catch(e){y(e.message)}},w=async()=>{await x()};return s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{children:"Loading..."})}):d?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Panel"}),(0,a.jsx)(l.z,{onClick:w,variant:"outline",children:"Sign Out"})]}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)(h.Zb,{children:[(0,a.jsx)(h.Ol,{children:(0,a.jsx)(h.ll,{children:"Basic Information"})}),(0,a.jsxs)(h.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"names",children:"Names"}),(0,a.jsx)(n.I,{id:"names",value:e.names,onChange:e=>t("names",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"subtitle",children:"Subtitle"}),(0,a.jsx)(n.I,{id:"subtitle",value:e.subtitle,onChange:e=>t("subtitle",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"weddingDate",children:"Wedding Date"}),(0,a.jsx)(n.I,{id:"weddingDate",value:e.weddingDate,onChange:e=>t("weddingDate",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"location",children:"Location"}),(0,a.jsx)(n.I,{id:"location",value:e.location,onChange:e=>t("location",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"invitationText",children:"Invitation Text"}),(0,a.jsx)(n.I,{id:"invitationText",value:e.invitationText,onChange:e=>t("invitationText",e.target.value)})]})]})]}),(0,a.jsxs)(h.Zb,{children:[(0,a.jsx)(h.Ol,{children:(0,a.jsx)(h.ll,{children:"Feature Toggles"})}),(0,a.jsxs)(h.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i._,{htmlFor:"showCountdown",children:"Show Countdown"}),(0,a.jsx)(c,{id:"showCountdown",checked:e.showCountdown,onCheckedChange:e=>t("showCountdown",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i._,{htmlFor:"showRSVP",children:"Show RSVP Section"}),(0,a.jsx)(c,{id:"showRSVP",checked:e.showRSVP,onCheckedChange:e=>t("showRSVP",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i._,{htmlFor:"showGuestBook",children:"Show Guest Book"}),(0,a.jsx)(c,{id:"showGuestBook",checked:e.showGuestBook,onCheckedChange:e=>t("showGuestBook",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i._,{htmlFor:"showPhotoGallery",children:"Show Photo Gallery"}),(0,a.jsx)(c,{id:"showPhotoGallery",checked:e.showPhotoGallery,onCheckedChange:e=>t("showPhotoGallery",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i._,{htmlFor:"showItinerary",children:"Show Itinerary"}),(0,a.jsx)(c,{id:"showItinerary",checked:e.showItinerary,onCheckedChange:e=>t("showItinerary",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i._,{htmlFor:"showGiftRegistry",children:"Show Gift Registry"}),(0,a.jsx)(c,{id:"showGiftRegistry",checked:e.showGiftRegistry,onCheckedChange:e=>t("showGiftRegistry",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i._,{htmlFor:"showAccommodation",children:"Show Accommodation"}),(0,a.jsx)(c,{id:"showAccommodation",checked:e.showAccommodation,onCheckedChange:e=>t("showAccommodation",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i._,{htmlFor:"showContact",children:"Show Contact"}),(0,a.jsx)(c,{id:"showContact",checked:e.showContact,onCheckedChange:e=>t("showContact",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i._,{htmlFor:"showBackgroundImage",children:"Show Background Image"}),(0,a.jsx)(c,{id:"showBackgroundImage",checked:e.showBackgroundImage,onCheckedChange:e=>t("showBackgroundImage",e)})]})]})]}),(0,a.jsxs)(h.Zb,{children:[(0,a.jsx)(h.Ol,{children:(0,a.jsx)(h.ll,{children:"Photo Gallery"})}),(0,a.jsx)(h.aY,{children:(0,a.jsx)(Z,{})})]}),(0,a.jsxs)(h.Zb,{children:[(0,a.jsx)(h.Ol,{children:(0,a.jsx)(h.ll,{children:"Guest Management"})}),(0,a.jsx)(h.aY,{children:(0,a.jsx)(Y,{})})]}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)("a",{href:"/",className:"mr-4",children:(0,a.jsx)(l.z,{variant:"outline",children:"Back to Home"})}),(0,a.jsx)(l.z,{onClick:()=>alert("Settings saved to Supabase!"),children:"Settings Updated"})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-8",children:(0,a.jsxs)(h.Zb,{className:"w-full max-w-md",children:[(0,a.jsx)(h.Ol,{children:(0,a.jsx)(h.ll,{children:"Admin Login"})}),(0,a.jsx)(h.aY,{children:(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"email",children:"Email"}),(0,a.jsx)(n.I,{id:"email",type:"email",value:u,onChange:e=>g(e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"password",children:"Password"}),(0,a.jsx)(n.I,{id:"password",type:"password",value:j,onChange:e=>f(e.target.value),required:!0})]}),p&&(0,a.jsx)("div",{className:"text-red-500 text-sm",children:p}),(0,a.jsx)(l.z,{type:"submit",className:"w-full",children:"Sign In"})]})})]})})}function Z(){let{settings:e,uploadImage:t,addGalleryImage:s,removeGalleryImage:l,addBackgroundImage:n,removeBackgroundImage:i,selectBackground:d}=(0,m.A)(),[o,c]=(0,r.useState)(!1),[h,u]=(0,r.useState)(!1),[g,j]=(0,r.useState)("gallery"),f=async e=>{if(e&&0!==e.length){c(!0);try{for(let a=0;a<e.length;a++){let r=e[a];if(r.type.startsWith("image/")){let e=await t(r);"gallery"===g?await s(e):await n(e)}}}catch(e){console.error("Upload failed:",e),alert("Failed to upload image. Please try again.")}finally{c(!1)}}},p=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?u(!0):"dragleave"===e.type&&u(!1)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:()=>j("gallery"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("gallery"===g?"bg-gold text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Upload to Gallery"}),(0,a.jsx)("button",{onClick:()=>j("background"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("background"===g?"bg-gold text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Upload Background"})]}),(0,a.jsxs)("div",{className:"relative border-2 border-dashed rounded-2xl p-8 text-center transition-all duration-200 ".concat(h?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:e=>{e.preventDefault(),e.stopPropagation(),u(!1),f(e.dataTransfer.files)},children:[(0,a.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{f(e.target.files)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:o}),(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:o?(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium text-gray-900",children:o?"Uploading...":"Drop photos here or click to browse"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Upload to"," ","gallery"===g?"wedding gallery":"background collection"]})]})]})]}),e.gallery_images.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Gallery (",e.gallery_images.length," photos)"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.gallery_images.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"aspect-square rounded-xl overflow-hidden bg-gray-100",children:(0,a.jsx)(x.default,{src:e,alt:"Gallery image ".concat(t+1),fill:!0,className:"object-cover"})}),(0,a.jsx)("button",{onClick:()=>l(t),className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 shadow-lg",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Background Images"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.showBackgroundImage?"Enabled":"Disabled"})]}),e.showBackgroundImage?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Selected Background:"}),(0,a.jsx)("div",{className:"w-full h-32 rounded-lg overflow-hidden bg-gray-100 border-2 border-gold"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.background_images.map((t,s)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("div",{className:"aspect-video rounded-xl overflow-hidden bg-gray-100 cursor-pointer border-2 transition-all ".concat(e.selected_background===t?"border-gold ring-2 ring-gold/20":"border-gray-200 hover:border-gray-300"),onClick:()=>d(t),children:[(0,a.jsx)(x.default,{src:t,alt:"Background ".concat(s+1),fill:!0,className:"object-cover"}),e.selected_background===t&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gold/20 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-gold rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]}),(0,a.jsx)("button",{onClick:()=>i(s),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 shadow-lg",children:(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},s))})]}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,a.jsx)("p",{children:"Background images are disabled"}),(0,a.jsx)("p",{className:"text-sm",children:'Enable "Show Background Image" to manage backgrounds'})]})]})]})}}},function(e){e.O(0,[310,777,910,73,335,971,117,744],function(){return e(e.s=7204)}),_N_E=e.O()}]);
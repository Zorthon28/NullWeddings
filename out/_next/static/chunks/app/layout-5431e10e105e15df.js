(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6126:function(e,t,o){Promise.resolve().then(o.t.bind(o,9974,23)),Promise.resolve().then(o.t.bind(o,2778,23)),Promise.resolve().then(o.bind(o,9314))},9314:function(e,t,o){"use strict";o.d(t,{Providers:function(){return n}});var a=o(7437),s=o(7561);function n(e){let{children:t}=e;return(0,a.jsx)(s.I,{children:t})}},7561:function(e,t,o){"use strict";o.d(t,{A:function(){return l},I:function(){return c}});var a=o(7437),s=o(2265),n=o(5526);let i={names:"Kenia y Gustavo",subtitle:"NOS CASAMOS",weddingDate:"21 de noviembre, 2025",invitationText:"Te invitamos a celebrar con nosotros",location:"TBD",showCountdown:!0,showRSVP:!0,showGuestBook:!0,showPhotoGallery:!0,showItinerary:!0,showGiftRegistry:!0,showAccommodation:!0,showContact:!0,showBackgroundImage:!0,gallery_images:["https://images.unsplash.com/photo-1519741497674-611481863552?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1511285560929-80b456fea0bc?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1465495976277-4387d4b0e4a6?w=800&h=600&fit=crop"],background_images:["https://images.unsplash.com/photo-1519741497674-611481863552?w=1920&h=1080&fit=crop","https://images.unsplash.com/photo-1511285560929-80b456fea0bc?w=1920&h=1080&fit=crop","https://images.unsplash.com/photo-1465495976277-4387d4b0e4a6?w=1920&h=1080&fit=crop"],selected_background:"https://images.unsplash.com/photo-1519741497674-611481863552?w=1920&h=1080&fit=crop"},r=(0,s.createContext)(null);function c(e){let{children:t}=e,[o,c]=(0,s.useState)(i),[l,u]=(0,s.useState)(!0),[g,d]=(0,s.useState)(null);(0,s.useEffect)(()=>{h(),(async()=>{var e;let{data:{session:t}}=await n.O.auth.getSession();d(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),u(!1)})();let{data:{subscription:e}}=n.O.auth.onAuthStateChange(async(e,t)=>{var o;d(null!==(o=null==t?void 0:t.user)&&void 0!==o?o:null)});return()=>e.unsubscribe()},[]);let h=async()=>{try{let{data:r,error:l}=await n.O.from("admin_settings").select("*").eq("id","main").single();if(l&&"PGRST116"!==l.code){console.error("Error loading settings:",l);return}if(r){var e,t,o,a,s;let{id:n,created_at:l,updated_at:u,...g}=r,d={names:g.names,subtitle:g.subtitle,weddingDate:g.wedding_date,invitationText:g.invitation_text,location:g.location,showCountdown:g.show_countdown,showRSVP:g.show_rsvp,showGuestBook:g.show_guest_book,showPhotoGallery:g.show_photo_gallery,showItinerary:null===(e=g.show_itinerary)||void 0===e||e,showGiftRegistry:null===(t=g.show_gift_registry)||void 0===t||t,showAccommodation:null===(o=g.show_accommodation)||void 0===o||o,showContact:null===(a=g.show_contact)||void 0===a||a,gallery_images:Array.isArray(g.gallery_images)?g.gallery_images:i.gallery_images,background_images:Array.isArray(g.background_images)?g.background_images:i.background_images,selected_background:g.selected_background?g.selected_background:i.selected_background,showBackgroundImage:null===(s=g.show_background_image)||void 0===s||s};c(d)}else await m(i)}catch(e){console.error("Error loading settings:",e)}},m=async e=>{try{let t={id:"main",names:e.names,subtitle:e.subtitle,wedding_date:e.weddingDate,invitation_text:e.invitationText,location:e.location,show_countdown:e.showCountdown,show_rsvp:e.showRSVP,show_guest_book:e.showGuestBook,show_photo_gallery:e.showPhotoGallery,show_itinerary:e.showItinerary,show_gift_registry:e.showGiftRegistry,show_accommodation:e.showAccommodation,show_contact:e.showContact,gallery_images:e.gallery_images,background_images:e.background_images,selected_background:e.selected_background,show_background_image:e.showBackgroundImage,updated_at:new Date().toISOString()},{error:o}=await n.O.from("admin_settings").upsert(t,{onConflict:"id"});o&&console.error("Error saving settings:",o)}catch(e){console.error("Error saving settings:",e)}},w=async(e,t)=>{let a={...o,[e]:t};c(a),await m(a)},_=async(e,t)=>{let{error:o}=await n.O.auth.signInWithPassword({email:e,password:t});if(o)throw o},b=async()=>{let{error:e}=await n.O.auth.signOut();if(e)throw e},f=async e=>{let t=e.name.split(".").pop(),o="".concat(Date.now(),".").concat(t),a="gallery/".concat(o),{error:s}=await n.O.storage.from("wedding-images").upload(a,e);if(s)throw s;let{data:i}=n.O.storage.from("wedding-images").getPublicUrl(a);return i.publicUrl},y=async e=>{let t=[...o.gallery_images,e];c({...o,gallery_images:t}),await m({...o,gallery_images:t})},p=async e=>{let t=o.gallery_images.filter((t,o)=>o!==e);c({...o,gallery_images:t}),await m({...o,gallery_images:t})},k=async e=>{let t=[...o.background_images,e];c({...o,background_images:t}),await m({...o,background_images:t})},v=async e=>{let t=o.background_images.filter((t,o)=>o!==e),a=o.selected_background===o.background_images[e]?t[0]||i.selected_background:o.selected_background;c({...o,background_images:t,selected_background:a}),await m({...o,background_images:t,selected_background:a})},I=async e=>{c({...o,selected_background:e}),await m({...o,selected_background:e})};return(0,a.jsx)(r.Provider,{value:{settings:o,updateSetting:w,isLoading:l,user:g,signIn:_,signOut:b,uploadImage:f,addGalleryImage:y,removeGalleryImage:p,addBackgroundImage:k,removeBackgroundImage:v,selectBackground:I},children:t})}function l(){let e=(0,s.useContext)(r);if(!e)throw Error("useAdmin must be used within AdminProvider");return e}},5526:function(e,t,o){"use strict";o.d(t,{O:function(){return a}});let a=(0,o(3777).eI)("https://nyeewcjsdwlekvmdmvio.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55ZWV3Y2pzZHdsZWt2bWRtdmlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA3MjA2NzYsImV4cCI6MjA3NjI5NjY3Nn0.osHWeG2dUMZRoYgNY0N_5qrIw4fayLMp2GrzfCIl-8Y")},2778:function(){},9974:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[635,777,971,117,744],function(){return e(e.s=6126)}),_N_E=e.O()}]);